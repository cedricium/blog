<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="whgZ74C_Tw84e33-CuTQs-FCZw8elqilzNbkDhHmq-w"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);border:none;}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:800;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;margin:1.75rem 0;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#007bff;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><meta data-react-helmet="true" property="og:type" content="website"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><link rel="icon" href="/blog/icons/icon-48x48.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="manifest" href="/blog/manifest.webmanifest"/><meta name="theme-color" content="#007bff"/><link rel="apple-touch-icon" sizes="48x48" href="/blog/icons/icon-48x48.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="72x72" href="/blog/icons/icon-72x72.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="96x96" href="/blog/icons/icon-96x96.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="144x144" href="/blog/icons/icon-144x144.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="192x192" href="/blog/icons/icon-192x192.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="256x256" href="/blog/icons/icon-256x256.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="384x384" href="/blog/icons/icon-384x384.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><link rel="apple-touch-icon" sizes="512x512" href="/blog/icons/icon-512x512.png?v=2f9637f4ab55f656e1dfa7213b5fdd66"/><title data-react-helmet="true">Unearth Diary #03: The Tech Powering Unearth | My Random Thoughts by Cedric Amaya</title><meta data-react-helmet="true" name="description" content="This is the third in a series of articles discussing my long-time side project,
Unearth. For my more technical audience, this post will…"/><meta data-react-helmet="true" property="og:title" content="Unearth Diary #03: The Tech Powering Unearth | My Random Thoughts by Cedric Amaya"/><meta data-react-helmet="true" property="og:description" content="This is the third in a series of articles discussing my long-time side project,
Unearth. For my more technical audience, this post will…"/><meta name="generator" content="Gatsby 2.19.22"/><meta data-react-helmet="true" property="og:url" content="https://cedric.tech/blog"/><meta data-react-helmet="true" property="og:image" content="https://cedric.tech/blog/og-image.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@CedricAmaya"/><meta data-react-helmet="true" name="twitter:title" content="Unearth Diary #03: The Tech Powering Unearth | My Random Thoughts by Cedric Amaya"/><meta data-react-helmet="true" name="twitter:description" content="This is the third in a series of articles discussing my long-time side project,
Unearth. For my more technical audience, this post will…"/><meta data-react-helmet="true" name="twitter:image" content="https://cedric.tech/blog/og-image.png"/><style data-href="/blog/styles.d3a187f77aa70716ab6a.css">code[class*=language-],pre[class*=language-]{font-family:Consolas,Menlo,Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;background:#f5f7ff;color:#5e6687}pre>code[class*=language-]{font-size:1em}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#dfe2f1}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#898ea4}.token.punctuation{color:#5e6687}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#c76b29}.token.property{color:#c08b30}.token.tag{color:#3d8fd1}.token.string{color:#22a2c9}.token.selector{color:#6679cc}.token.attr-name{color:#c76b29}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#22a2c9}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#ac9739}.token.atrule,.token.regex,.token.statement{color:#22a2c9}.token.placeholder,.token.variable{color:#3d8fd1}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #202746;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c94922}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c94922;outline-offset:.4em}.line-numbers .line-numbers-rows{border-right-color:#dfe2f1}.line-numbers-rows>span:before{color:#979db4}.line-highlight{background:rgba(107,115,148,.2);background:-webkit-gradient(linear,left top,right top,color-stop(70%,rgba(107,115,148,.2)),to(rgba(107,115,148,0)));background:linear-gradient(90deg,rgba(107,115,148,.2) 70%,rgba(107,115,148,0))}</style><link rel="sitemap" type="application/xml" href="/blog/sitemap.xml"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-js-e572d3166c725deea874.js"/><link as="script" rel="preload" href="/blog/commons-10c682a83ab9b82a429c.js"/><link as="script" rel="preload" href="/blog/app-7a40cc5851542cac00fa.js"/><link as="script" rel="preload" href="/blog/styles-1a925a1601c065fa085f.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-f72e8e32e5a79fa656a4.js"/><link as="fetch" rel="preload" href="/blog/page-data/unearth-diary-03-the-tech-powering-unearth/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:39rem;padding:2.4375rem 1.21875rem"><h3 style="margin-top:0;margin-bottom:-1.625rem"><a style="box-shadow:none;text-decoration:none" href="/blog/">My Random Thoughts</a></h3><h1>Unearth Diary #03: The Tech Powering Unearth</h1><p style="font-size:0.87055rem;line-height:1.625rem;display:block;margin-bottom:1.625rem;margin-top:-0.8125rem;font-weight:500">February 22, 2020<!-- --> · <!-- -->4<!-- --> min read</p><div><p>This is the third in a series of articles discussing my long-time side project,
Unearth. For my more technical audience, this post will cover Unearth’s tech
stack and architecture.</p>
<hr>
<p>Unearth subscribes to the monolithic repo (or monorepo) philosophy. Examining
the source code, you can see that all of the code for both the backend and
frontend reside in a single repository. Furthermore, the programming language of
choice is JavaScript since that’s what I know best.</p>
<h2>Backend</h2>
<ul>
<li>Node.js</li>
<li>Express.js</li>
<li>PostgreSQL</li>
<li>SocketIO</li>
<li>Nodemailer</li>
</ul>
<p>The backend server is powered by Express.js, a web application framework for
Node.js. The server itself consists of a REST API that returns JSON responses
and an instance of a socket.io server for polling during the Reddit sync
process.</p>
<p><strong>Database</strong></p>
<p>Data storage/persistence is accomplished using PostgreSQL. The database itself
consists of two tables: users and things. The former contains Unearth users and
holds information like their Reddit id, username, email, account preferences,
and whether they’ve completed the onboarding process. The latter contains saved
items (which can either be a Reddit post or comment). The things’ columns
mirror those of Reddit data, with fields such as: <code class="language-text">id</code>, <code class="language-text">subreddit</code>, <code class="language-text">score</code>, <code class="language-text">over_18</code> (aka NSFW), and <code class="language-text">url</code> to name a few. The things table also has a
<code class="language-text">user_id</code> column which is used to create a many-to-one relationship with user
entities.</p>
<div style="margin: 1rem 0 1.5rem">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;">
      <a class="gatsby-resp-image-link" href="/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/78274/unearth-db-schema.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 107.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAACdklEQVQ4y5WU2W7TQBSG87C8AAhxhfoCUKmoFCEWgQQXFERLkXpB04tWrcoiUOGOqiyKm81LPF7Gy9hxfs6ZxM4CSYmlPzPxnPnmnzNnXFNZBmCAxU+By58BmFXjzuezJu69/YiNnQ9Ye32CO1tjrb46xplhYf/LOda3T3CXtL411sab97i1eYTT85aG1ph9+PUHVjcPcfvlEW4+3sPKk/pQT+u4cX9XBz/bP8XK8wNce7iHqw/eVbr+qI4razs4+PZL+6xleY4iVwiFg0GWjLZfVBooCU8mMHsCIgyh+n2kNEexqJ/1C/gyRJKmyOldjX/iOEajYUAIDxH1g1AiZEmJXq8H24vgCgHHtpEkiY5nRTTOrXBdxFE8BnJQt9uFaZoaoIOjiBTD94QGCj/Q4zZBTdOC4zg6LiTX9mihKYccIGlFOVp1CI3hlUDPR6fT0ZMZwuJF9Q5mgfyn3W7rARa7DYJguB3hVkCO8X0fKeWrXJSBbOYvYKvV0sHssFy9zI8lJFKVQSmFjGqtFM/ltnz/T+BU0mPOoVcB+xSbLxBDKyAnnJ2NDyQaJT2A5Q2B5aR5mnLICS9zMYZJvWV7BrjIZXXKDCxPuATywXDtLQ1kV4ZhwOUCndkyl40lwuUdMkyDJoAsT4jqUP4bmJJDq7wlBEn0KVObxJB8E5bOIQEbF02YtoOQbkcgI9326G6bFl21ZRwW/RxCxvhudNGwfTRFhAtXVvptCXQJOFnI88tn5HC68klznEzCBkVOX7d8ptipsBdvYdpN2eddOX5KqVCUroy+hUMpNePwslvA7jmXQB+7n1y8OPbQdmL8bEdoOQl9iHP8AXV0QD6ozH3yAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="Unearth database schema" title="Unearth database schema" src="/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/fcda8/unearth-db-schema.png" srcset="/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/12f09/unearth-db-schema.png 148w,
/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/e4a3f/unearth-db-schema.png 295w,
/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/fcda8/unearth-db-schema.png 590w,
/blog/static/762ca5476fe0d1aaa50d4c1da65daa59/78274/unearth-db-schema.png 644w" sizes="(max-width: 590px) 100vw, 590px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy">
  </a>
    </span>
  <center>
    <small>Unearth database schema courtesy dbdiagram.io</small>
  </center>
</div>
<p><strong>Emails</strong></p>
<p>Emails are sent using Nodemailer. Having never worked with emails or templating
engines before, I made the mistake of going with PugJS to create the email
templates. For example, take a look at the
<a href="https://github.com/cedricium/unearth/blob/master/emails/welcome/html.pug">Unearth welcome email</a>.
Personally, I find it very hard to read compared to traditional HTML so
sometime in the future I would like to refactor the templates to something more
readable such as Handlebars.js.</p>
<h2>Frontend</h2>
<ul>
<li>React.js / Gatsby</li>
<li>Redux</li>
<li>styled-components</li>
</ul>
<p>When Unearth was first built, the client app was written in React, scaffolded
using Create React App. I’ve since ported the entire site over to GatsbyJS.</p>
<p><strong>Frontend Web Frameworks</strong></p>
<p>There were a number of reasons for choosing Gatsby. One, I wanted to have a
statically-generated SEO-optimized landing page that was fast to load. Another
requirement that Gatsby allowed was not having to separate the landing site
from the actual dynamic web app. I highly recommend reading
<a href="https://www.gatsbyjs.org/blog/2018-11-07-gatsby-for-apps/"><em>Gatsby for Apps</em></a>
and watching any of Dustin Schau’s conference talks if you want to learn more
about using Gatsby to build hybrid static/dynamic sites.</p>
<p><strong>Styling</strong></p>
<p>Styled Components are used to style the landing and markdown pages. The rest of
the app is styled using Water.css. In the future I have plans to refactor the
web app, removing Water.css and replacing it with a themeable React component
library like Chakra UI.</p>
<p><strong>State Management</strong></p>
<p>Before Unearth was what it is today (a newsletter delivery service), it was
supposed to be a web app for filtering, searching, and sorting users’ Reddit
saves—much akin to sites like RedditManager or Savvit. As such, I setup Redux in
the project to help manage global state throughout the app. In addition to
Redux, I had used helper libraries like redux-thunk and redux-persist in order
to work with asynchronous actions and store Redux state in the user’s local
storage, respectively.</p>
<p>There’s no real reason for keeping Redux on the client nowadays since there is
a minimal amount of data being fetched and worked on behind the <code class="language-text">/app</code> route. I
don’t think I will remove it anytime soon, however, because I might venture
down the path of allowing users to interact with their saves—I guess we’ll see.</p>
<h2>Deployments &#x26; DevOps</h2>
<p>Despite using a monorepo, the backend and frontend are not coupled together
when deployed. I use a Heroku hobby dyno for the backend server. This app has a
couple add-ons installed:</p>
<ul>
<li>Heroku Postgres (production hobby-basic database)</li>
<li>Advanced Scheduler (for managing and executing cron jobs responsible for
sending scheduled newsletters).</li>
</ul>
<p>The frontend is deployed via Netlify and makes use of the Netlify DNS. Some of
the DNS settings and records I need to manage include:</p>
<ul>
<li>pointing Namecheap’s nameservers to Netlify</li>
<li>improving email deliverability using DKIM and SPF authentication</li>
<li>domain authentication</li>
</ul>
<p>Both Heroku and Netlify are integrated with GitHub to do automatic deployments
from the <code class="language-text">master</code> branch. Netlify is specifically configured to only deploy
when changes occur in the client-v2 directory.</p>
<p>Heroku deploys everything minus the client and client-v2 directories, thus
limiting the size of the slug. Recently, I setup a GitHub Actions workflow to
run tests for all PRs and pushes to the <code class="language-text">master</code> branch. Heroku uses the results
from this workflow to automatically deploy new builds if all tests pass.</p>
<p>As for emails, both transactional and scheduled/marketing emails are delivered
via Twilio Sendgrid. I use Zoho Mail to send one-off emails with the
<code class="language-text">tryunearth.com</code> domain to Unearth users regarding updates to the service.</p>
<hr>
<p>If Unearth sounds like something you would find useful,
<a href="https://www.tryunearth.com/">sign up today and give it try</a>. I would love to
hear your thoughts about the service and any other questions or comments you may
have.</p></div><hr style="margin-bottom:1.625rem"/><div style="display:flex;margin-bottom:4.0625rem"><img src="/blog/static/avatar-a4c0572fba2f65f42cbe0ca29987940c.png" alt="Cedric Amaya" style="margin-right:0.8125rem;margin-bottom:0;width:3.25rem;height:3.25rem"/><p>Written by <strong>Cedric Amaya</strong> who is currently studying Computer Science in sunny California. You should<!-- --> <a href="https://twitter.com/cedricamaya" target="_blank" rel="noopener noreferrer">follow him on Twitter</a>.</p></div><ul class="nav-links" style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/unearth-diary-02-how-does-it-work/">← <!-- -->Unearth Diary #02: How Does It Work</a></li><li></li></ul></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/unearth-diary-03-the-tech-powering-unearth/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-7a40cc5851542cac00fa.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-498d614abd91358533fa.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-e572d3166c725deea874.js"],"component---src-pages-404-js":["/component---src-pages-404-js-cfefc23f38129123bd06.js"],"component---src-pages-about-js":["/component---src-pages-about-js-f8bec50b6b39eb821327.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f51309d697b4279641d0.js"]};/*]]>*/</script><script src="/blog/webpack-runtime-f72e8e32e5a79fa656a4.js" async=""></script><script src="/blog/styles-1a925a1601c065fa085f.js" async=""></script><script src="/blog/app-7a40cc5851542cac00fa.js" async=""></script><script src="/blog/commons-10c682a83ab9b82a429c.js" async=""></script><script src="/blog/component---src-templates-blog-post-js-e572d3166c725deea874.js" async=""></script></body></html>